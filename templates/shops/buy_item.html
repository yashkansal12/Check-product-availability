{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h2 class="mb-3">Buy Item</h2>
    <div class="card p-4 shadow-sm rounded-3">
        <h4 class="mb-3">{{ item.name }}</h4>
        <p class="mb-1">Price: ₹<span id="price">{{ item.price }}</span></p>
        <p class="mb-3">Available: {{ item.quantity }}</p>

        <form method="POST">
            {% csrf_token %}
            <div class="mb-3">
                <label for="quantity" class="form-label">Quantity</label>
                <input type="number" id="quantity" name="quantity" value="1" min="1" max="{{ item.quantity }}" class="form-control">
            </div>

            <p class="mb-3">Total: ₹<span id="total">{{ item.price }}</span></p>

            <!-- Add to Cart / Buy -->
            <button type="submit" class="btn btn-success btn-lg w-100">Proceed to Checkout</button>
        </form>
    </div>
</div>

<script>
const price = parseFloat(document.getElementById('price').innerText);
const quantityInput = document.getElementById('quantity');
const totalSpan = document.getElementById('total');

quantityInput.addEventListener('input', function() {
    const qty = parseInt(this.value) || 1;
    totalSpan.innerText = (qty * price).toFixed(2);
});
</script>
{% endblock %}
